{
	"system_version": "2.4",
	"system_name": "Comprehensive Existing Codebase Documentation Workflow with Developer Operations and Standards",
	"agent_orchestration_model": "sequential_with_parallelization_and_strict_gates",
	"description": "Generate a strict, navigable documentation set for an existing Host / Module / Plugin codebase. Enhanced with comprehensive improvement tracking, extensive text-based diagrams, developer operations guides, architecture decision records, coding standards, and contribution guidelines.",

	"changelog_from_2_3": {
		"version": "2.4",
		"date": "2025-12-16",
		"changes": [
			"Added developer operations pages (46-52): onboarding, quick-start, debugging, troubleshooting, contribution, standards, development workflow",
			"Added Architecture Decision Records (ADR) appendix page (56)",
			"Expanded from 45 to 58 pages (00-57) with new DevOps index at page 45",
			"Enhanced formatting: all technical terms in backticks (classes, folders, files, technologies)",
			"Added secrets management guidance for Rider project settings",
			"Added code quality policy without numeric thresholds (human review signals)",
			"Added PR review checklist focused on readability and maintainability",
			"Enhanced terminology index to track technical terms for backtick formatting",
			"All diagrams remain text-only ASCII (no mermaid/graphviz/plantuml)",
			"Reorganized appendices: standards (40), policy (41), checklist (42), diagrams (43), improvements (44), devops (45-52), risks (53), mapping (54), JSON cleanup (55), ADRs (56), glossary (57)",
			"Retained all v2.3 features: improvements tracking, quality scoring, 18+ diagrams, parallelization, strict gates"
		]
	},

	"global_configuration": {
		"execution_modes": {
			"review_mode": {
				"type": "enum",
				"values": ["interactive", "batch"],
				"default": "interactive",
				"description": "Interactive pauses at gates (recommended). Batch runs all phases then emits a review pack with decision points logged."
			},
			"validation_strictness": {
				"type": "enum",
				"values": ["strict", "lenient"],
				"default": "strict",
				"description": "Strict blocks on required checks; lenient continues but logs all gaps and remediation steps."
			},
			"batch_mode_behavior": {
				"emit_decision_log": true,
				"pause_points": [
					"after_preflight_if_blocking_questions",
					"after_inventory_if_major_unknowns",
					"after_fileplan_lock",
					"after_final_validation"
				],
				"auto_proceed_conditions": [
					"all_blocking_questions_answered_in_answers_bundle",
					"inventory_confidence_score >= 0.85",
					"no_security_critical_findings"
				]
			}
		},

		"determinism_rules": {
			"single_source_of_truth": [
				"01-planned-files.json",
				"04-link-map.json",
				"03-coverage-map.json",
				"02-terminology-index.json",
				"07-improvements-map.json",
				"08-technical-terms-index.json"
			],
			"no_silent_regeneration": true,
			"patch_behavior": {
				"allowed": true,
				"scope": "only files impacted by the user's new inputs or corrected assumptions",
				"must_emit": "06-change-log.md",
				"diff_generation": {
					"enabled": true,
					"format": "unified_diff",
					"include_in_changelog": true
				},
				"revalidation_required": [
					"link_validation",
					"coverage_validation",
					"terminology_validation",
					"diagram_validation",
					"improvements_validation",
					"technical_term_formatting_validation"
				],
				"incremental_update_workflow": {
					"trigger": "user provides new source or corrections",
					"steps": [
						"Compare current 01-inventory-index.json with new scan",
						"Identify changed/added/removed areas",
						"Map impacts to affected pages via 03-coverage-map.json",
						"Regenerate only impacted pages",
						"Update link-map, coverage-map, improvements-map, technical-terms-index",
						"Run validators on changed pages + their dependents",
						"Update diagram pages if structural changes detected",
						"Emit 06-change-log.md with before/after summary"
					],
					"preserve": [
						"User-added notes in appendices",
						"Custom diagrams (mark as user-maintained)",
						"Manual overrides (if flagged in metadata)"
					]
				}
			},
			"version_tracking": {
				"enabled": true,
				"schema_version_in": "00-preflight-summary.md",
				"content_hash_in": "01-planned-files.json",
				"change_history_in": "06-change-log.md",
				"purpose": "Track documentation evolution and enable rollback"
			}
		},

		"question_protocol": {
			"ask_only_when_missing_or_ambiguous": true,
			"ask_in_rounds": true,
			"max_questions_per_round": 12,
			"question_categories": [
				"BLOCKING_PATHS",
				"BLOCKING_SCOPE",
				"BLOCKING_TEMPLATE_RULES",
				"BLOCKING_DISAMBIGUATIONS",
				"NON_BLOCKING_CONTEXT",
				"NON_BLOCKING_NAMING"
			],
			"default_assumptions_if_unanswered": [
				{
					"id": "A_SCOPE_DEPTH",
					"assume": "balanced",
					"used_when": "user does not specify depth",
					"must_log_in": "00-preflight-summary.md"
				},
				{
					"id": "A_EXTERNAL_LINKS",
					"assume": "allowed_with_audit",
					"used_when": "user does not explicitly configure",
					"must_log_in": "00-preflight-summary.md",
					"note": "Changed from disallowed to allowed_with_audit for modern docs needs"
				},
				{
					"id": "A_AMBIGUOUS_CONVENTIONS",
					"assume": "discover_and_document_as_found",
					"used_when": "UI conventions differ from expected (00-09 layers, prefix system)",
					"must_log_in": "00-preflight-summary.md"
				}
			],
			"reask_behavior": {
				"allowed": true,
				"only_if": [
					"answer conflicts with discovered facts",
					"answer is incomplete for strict blockers",
					"multiple paths/targets exist and cannot be disambiguated by discovery"
				],
				"max_reask_rounds": 2,
				"escalation": "If still ambiguous after 2 rounds, document the ambiguity in 05-final-issues.md with investigation plan"
			}
		},

		"security_and_safety": {
			"never_output_secrets": true,
			"secret_detection": {
				"enabled": true,
				"scan_targets": [
					"*.json",
					"*.cs",
					"*.razor",
					"*.config",
					"*.yml",
					"*.yaml",
					"*.env",
					"appsettings*.json",
					"*.xml",
					"*.props",
					"*.targets"
				],
				"patterns": [
					"apikey",
					"api_key",
					"token",
					"secret",
					"connectionstring",
					"connection_string",
					"privatekey",
					"client_secret",
					"sas",
					"bearer",
					"password",
					"pwd",
					"credential"
				],
				"reporting_rules": {
					"report_location": true,
					"report_risk": true,
					"never_print_value": true,
					"severity_levels": {
						"critical": "actual secrets in code/config",
						"high": "secrets in example files without .example suffix",
						"medium": "potential secrets in comments",
						"low": "secret-like variable names (false positives ok)"
					}
				}
			},
			"filesystem_policy": {
				"read_scope": "project_source only",
				"write_scope": "save_output_to only",
				"no_writes_outside_output": true,
				"no_execution_by_default": true,
				"exception_for_health_check": {
					"allowed": true,
					"purpose": "validate existing documentation integrity",
					"restricted_to": "read operations only"
				}
			},
			"external_links_policy": {
				"default": "allowed_with_audit",
				"audit_requirements": {
					"track_all_external_urls": true,
					"log_location": "04-link-map.json",
					"categorize_by": ["documentation", "api_reference", "specification", "tool", "unknown"],
					"review_flags": [
						"domain_not_in_allowlist",
						"link_returns_404",
						"link_redirects",
						"insecure_http"
					]
				},
				"allowlist_domains": [
					"docs.microsoft.com",
					"learn.microsoft.com",
					"github.com",
					"developer.mozilla.org",
					"w3.org",
					"ietf.org",
					"rfc-editor.org"
				],
				"restricted_pages": {
					"most_pages": "external links allowed but must be audited",
					"{doc_slug}-25-arch-resources.md": "primary location for external references with categorization"
				},
				"link_format": {
					"must_include": "title or context",
					"recommended": "External: [Title](url) - brief description",
					"accessibility": "ensure link text is descriptive"
				}
			}
		},

		"formatting_and_style": {
			"template_reference": "example_docs_source",
			"headings": ["#", "##", "###"],
			"max_heading_depth": 3,
			"divider": "---",
			"lists": "hyphen_bullets",
			"tables": "avoid_unless_unavoidable",
			"code_blocks": "minimal_and_targeted",
			"links": "relative_links_for_internal",
			
			"technical_term_formatting": {
				"enabled": true,
				"format": "backticks",
				"applies_to": [
					"class_names",
					"method_names",
					"property_names",
					"folder_names",
					"file_names",
					"namespace_names",
					"project_names",
					"component_names",
					"service_names",
					"technology_names",
					"framework_names",
					"library_names",
					"pattern_names",
					"architecture_terms"
				],
				"examples": {
					"classes": "`FieldBase`, `ComponentBase`, `Pointer_Service`",
					"folders": "`Shared/_Core/`, `02_Fields/`, `Plugins/Airtable/`",
					"files": "`Program.cs`, `appsettings.json`, `pages.json`",
					"technologies": "`Blazor Server`, `SignalR`, `Airtable API`, `.NET 8`",
					"patterns": "`dependency injection`, `service-based state`, `schema-driven UI`"
				},
				"exception_rules": {
					"in_code_blocks": "no backticks needed (already formatted)",
					"in_headings": "backticks allowed for emphasis",
					"common_words": "do not wrap common words like 'page', 'folder', 'file' unless part of specific name"
				}
			},

			"diagrams": {
				"format": "text_only_ascii",
				"forbidden_formats": ["mermaid", "graphviz", "plantuml", "svg", "image"],
				"required_format": "```text ... ```",
				"minimum_diagrams_per_docset": 15,
				"style_guidelines": {
					"use_box_drawing_characters": true,
					"unicode_allowed": ["─", "│", "┌", "┐", "└", "┘", "├", "┤", "┬", "┴", "┼", "▼", "▲", "◄", "►", "→", "←", "↓", "↑"],
					"max_width": 80,
					"prefer_clarity_over_complexity": true,
					"include_legend_when_needed": true
				}
			},

			"page_layout_contract": {
				"required_order": [
					"Title (H1)",
					"Short intro (2–8 lines)",
					"Divider",
					"Main sections",
					"Divider",
					"Bottom navigation block (1–5 items)",
					"Trailing divider"
				],
				"bottom_nav_rules": {
					"must_include": ["Back to {doc_slug}.md"],
					"must_include_one_of": [
						"Back to {doc_slug}-00-base-index.md",
						"Back to {doc_slug}-12-arch-index.md",
						"Back to {doc_slug}-26-ui-index.md",
						"Back to {doc_slug}-39-appendix-index.md",
						"Back to {doc_slug}-45-devops-index.md"
					],
					"max_items": 5,
					"format": "hyphen list with relative links"
				}
			},
			"accessibility": {
				"link_text": "must be descriptive (no 'click here' or bare URLs)",
				"heading_hierarchy": "must not skip levels (no H1 → H3)",
				"alt_text_for_diagrams": "include textual description in prose before diagram"
			}
		},

		"ui_conventions_discovery": {
			"expected_patterns": {
				"layer_folders": {
					"expected": ["00_Core", "01_Displays", "02_Fields", "03_Pointers", "04_Actions", "05_Nodes", "06_Components", "07_Widgets", "08_View", "09_Panels"],
					"description": "Cross-layer numbered folder hierarchy (micro → macro)",
					"discovery_mode": "scan and compare to expected, document actual findings"
				},
				"component_prefixes": {
					"expected": ["D_", "F_", "P_", "A_", "N_", "C_", "W_", "V_", "PNL_"],
					"description": "Component prefix system and roles",
					"discovery_mode": "regex scan for patterns, document actual findings"
				},
				"ui_hierarchy_source": {
					"expected": "Shared/_Sites",
					"description": "Source of UI hierarchy",
					"discovery_mode": "check existence, document alternative if found"
				}
			},
			"discovery_behavior": {
				"if_matches_expected": "Document as conforming to conventions",
				"if_differs": [
					"Document actual findings explicitly",
					"Note deviations from expected patterns",
					"Do not force-fit actual structure into expected template",
					"Update relevant UI pages (29, 30) with discovered reality"
				],
				"if_absent": [
					"Mark UI layer pages as 'Not present in this codebase'",
					"Include brief explanation of what was searched for",
					"No placeholder content or speculation about future implementation"
				]
			},
			"validation": {
				"consistency_check": "Ensure UI pages (27-38) accurately reflect discovered conventions, not expected ones",
				"cross_reference": "Link between 01-source-inventory.md findings and UI documentation"
			}
		},

		"improvements_tracking": {
			"enabled": true,
			"purpose": "Systematically identify and document actionable improvements to reach 10/10 project quality",
			"scoring_system": {
				"dimensions": [
					{
						"name": "Architecture Quality",
						"weight": 0.20,
						"criteria": ["boundaries", "composition", "extensibility", "testability"]
					},
					{
						"name": "Code Quality",
						"weight": 0.15,
						"criteria": ["readability", "maintainability", "consistency", "documentation"]
					},
					{
						"name": "Testing",
						"weight": 0.20,
						"criteria": ["coverage", "quality", "automation", "types"]
					},
					{
						"name": "Operations",
						"weight": 0.15,
						"criteria": ["deployment", "monitoring", "resilience", "security"]
					},
					{
						"name": "Documentation",
						"weight": 0.15,
						"criteria": ["completeness", "accuracy", "usability", "maintenance"]
					},
					{
						"name": "Developer Experience",
						"weight": 0.15,
						"criteria": ["onboarding", "tooling", "feedback_loops", "contribution_process"]
					}
				],
				"scale": "0.0 to 10.0",
				"target": 10.0
			},
			"improvement_categories": [
				"CRITICAL",
				"HIGH_IMPACT",
				"MEDIUM_IMPACT",
				"LOW_IMPACT",
				"NICE_TO_HAVE"
			],
			"phasing": {
				"phase_1_foundation": "0-3 months",
				"phase_2_maturity": "3-6 months",
				"phase_3_excellence": "6-12 months",
				"phase_4_optimization": "12+ months"
			}
		},

		"diagram_requirements": {
			"mandatory_diagram_types": [
				{
					"type": "system_architecture",
					"description": "Overall system boundaries and major components",
					"minimum_count": 1
				},
				{
					"type": "class_hierarchy",
					"description": "Inheritance trees for major class families",
					"minimum_count": 3,
					"examples": ["Core base classes", "UI component hierarchy", "Service classes"]
				},
				{
					"type": "dependency_graph",
					"description": "Dependencies between projects, modules, and major namespaces",
					"minimum_count": 2,
					"directions": ["top-down", "left-right"]
				},
				{
					"type": "data_flow",
					"description": "How data moves through the system",
					"minimum_count": 2,
					"examples": ["Sync flow", "Render flow", "State update flow"]
				},
				{
					"type": "component_relationships",
					"description": "How components connect and communicate",
					"minimum_count": 2,
					"examples": ["Service dependencies", "Component composition"]
				},
				{
					"type": "sequence_diagram",
					"description": "Step-by-step interaction sequences",
					"minimum_count": 2,
					"examples": ["User action flow", "Initialization sequence"]
				},
				{
					"type": "layer_structure",
					"description": "00-09 layer organization and relationships",
					"minimum_count": 1
				},
				{
					"type": "folder_structure",
					"description": "Physical file/folder organization",
					"minimum_count": 1
				},
				{
					"type": "deployment_topology",
					"description": "How system deploys across environments",
					"minimum_count": 1
				}
			],
			"total_minimum_diagrams": 15,
			"diagram_placement": {
				"primary_location": "{doc_slug}-43-diagrams.md",
				"allowed_inline": "architecture and UI pages may include 1-2 focused diagrams inline",
				"cross_reference": "all diagrams must be indexed in page 43"
			},
			"diagram_standards": {
				"format": "text_only_ascii_in_code_blocks",
				"code_block_format": "```text\n...\n```",
				"forbidden": ["```mermaid", "```dot", "```plantuml", "image embeds"],
				"width_limit": 80,
				"include_title": true,
				"include_legend_if_complex": true,
				"textual_description_required": "before each diagram"
			}
		},

		"code_quality_policy": {
			"philosophy": "Human review signals over numeric thresholds",
			"rationale": "Code quality is multidimensional and context-dependent. Numeric metrics (cyclomatic complexity, lines per method) can encourage gaming and miss real issues. Focus on readability, maintainability, and testability.",
			
			"pr_review_checklist": {
				"readability": [
					"Names clearly express intent (classes, methods, variables)",
					"Code structure follows single responsibility principle",
					"Complex logic has explanatory comments",
					"No magic numbers or strings (use named constants)"
				],
				"boundaries": [
					"Layer dependencies respected (no reverse dependencies)",
					"Plugin isolation maintained (no Host → Plugin coupling)",
					"Services used appropriately (not bypassed)"
				],
				"error_handling": [
					"Exceptions handled at appropriate level",
					"User-facing errors provide clear guidance",
					"Retry/timeout policies applied to external calls",
					"Failures logged with context"
				],
				"testing": [
					"Tricky logic has unit tests",
					"Happy path and edge cases covered",
					"Integration points tested",
					"Test names clearly describe scenario"
				],
				"refactoring_signals": [
					"Method too long? → Extract smaller methods",
					"Too many parameters? → Introduce parameter object",
					"Deeply nested conditions? → Extract guard clauses",
					"Repeated code? → Extract to shared method"
				]
			},

			"tools_and_alternatives": {
				"static_analysis": {
					"roslyn_analyzers": "Built-in C# analyzers for common issues",
					"editorconfig": "Consistent code formatting without debate",
					"sonarqube": "Optional for teams wanting deeper analysis",
					"ndepend": "Optional for architecture rule enforcement"
				},
				"decision": "Use Roslyn analyzers + EditorConfig as baseline. Teams can add SonarQube/NDepend if desired, but not required.",
				"consequences": {
					"pros": "Flexible, low barrier to entry, focuses on readability",
					"cons": "Less automated enforcement, requires skilled reviewers"
				}
			}
		},

		"secrets_management": {
			"local_development": {
				"rider_user_secrets": {
					"location": "Rider project settings (not committed to git)",
					"access": "Right-click project → Tools → Manage User Secrets",
					"storage_path": "%APPDATA%\\Microsoft\\UserSecrets\\{user-secrets-id}\\secrets.json",
					"format": "JSON file stored in user profile directory",
					"example": {
						"Airtable": {
							"ApiKey": "keyXXXXXXXXXXXXXX",
							"BaseId": "appXXXXXXXXXXXXXX"
						}
					},
					"advantages": [
						"Not committed to git (outside project folder)",
						"Shared across project instances",
						"Works with all .NET tools"
					]
				},
				"dotnet_user_secrets": {
					"command": "dotnet user-secrets set 'Airtable:ApiKey' 'keyXXX...'",
					"tool": "Built-in .NET secret manager",
					"advantage": "Works across IDEs (VS, Rider, VSCode)",
					"init_command": "dotnet user-secrets init"
				}
			},
			"production": {
				"azure_key_vault": "Recommended for Azure deployments",
				"aws_secrets_manager": "Recommended for AWS deployments",
				"environment_variables": "Fallback for simple deployments"
			},
			"never_commit": [
				"API keys in code or appsettings.json",
				"Connection strings with passwords",
				"Service account credentials",
				"Certificates or private keys"
			],
			"detection": {
				"git_hooks": "Pre-commit hook to scan for secrets",
				"ci_scanning": "truffleHog or GitGuardian in CI/CD",
				"ide_warnings": "Rider/Resharper can detect potential secrets"
			}
		},

		"architecture_decision_records": {
			"enabled": true,
			"purpose": "Document significant architectural decisions with context, alternatives, and consequences",
			"format": "Markdown with standard ADR template",
			"template": {
				"title": "ADR-{number}: {Short Title}",
				"status": "Proposed | Accepted | Deprecated | Superseded",
				"date": "YYYY-MM-DD",
				"context": "What is the issue we're seeing that is motivating this decision?",
				"decision": "What is the change we're proposing/doing?",
				"alternatives_considered": "What other options did we consider?",
				"consequences": "What becomes easier or harder as a result?",
				"references": "Links to discussions, RFCs, or related ADRs"
			},
			"examples": [
				"ADR-001: Use Blazor Server over Blazor WebAssembly",
				"ADR-002: Adopt 00-09 Layer System for UI Components",
				"ADR-003: Use Service-Based State Management",
				"ADR-004: Schema-Driven UI Generation from Airtable",
				"ADR-005: Human Review over Numeric Code Quality Metrics"
			],
			"storage": "Appendix page 56 with index of all ADRs"
		}
	},

	"inputs": {
		"inputs_required": [
			{ "name": "project_name", "type": "string", "required": true },
			{
				"name": "project_type",
				"type": "enum",
				"required": true,
				"values": ["host", "module", "plugin"],
				"description": "Primary project type; if mixed, user must specify which to emphasize"
			},
			{ "name": "project_source", "type": "zip|tree|path", "required": true },
			{ "name": "save_output_to", "type": "path", "required": true },
			{ "name": "example_docs_source", "type": "zip|tree|path", "required": true }
		],
		"inputs_optional": [
			{
				"name": "answers_bundle",
				"type": "text|json",
				"required": false,
				"description": "Large user prompt with answers + context. Used to reduce questions."
			},
			{
				"name": "scope_overrides",
				"type": "json",
				"required": false,
				"description": "Include/exclude paths, topics, or pages."
			},
			{
				"name": "depth",
				"type": "enum",
				"required": false,
				"values": ["high_level", "balanced", "deep"],
				"default": "balanced"
			},
			{
				"name": "external_links_config",
				"type": "object",
				"required": false,
				"default": {"mode": "allowed_with_audit", "allowlist_additions": []},
				"description": "Configure external link handling"
			},
			{
				"name": "existing_docs_path",
				"type": "path",
				"required": false,
				"description": "Path to existing documentation for health check or incremental update"
			},
			{
				"name": "improvement_focus_areas",
				"type": "array",
				"required": false,
				"description": "Specific areas to emphasize in improvements roadmap"
			}
		]
	},

	"docset_identity": {
		"doc_slug_rules": {
			"doc_slug": "{lowercase(project_name)}",
			"enforce_lowercase": true,
			"allowed_chars": "a-z0-9-"
		},
		"fixed_numbering": {
			"rule": "00..57 fixed ascending; no duplicates; do not renumber within a run.",
			"must_generate_all_numbered_files": true,
			"page_count": 58,
			"not_applicable_policy": {
				"allowed": true,
				"must_be_explicit": true,
				"forbidden_words": ["TBD", "TODO", "???"],
				"required_phrase_pattern": "Not present in this codebase (as discovered in inventory).",
				"minimum_content": [
					"State what was searched for",
					"Explain why absent (not found vs not applicable vs planned)",
					"If planned, reference evidence",
					"Provide 2-3 sentence minimum explanation"
				],
				"consolidation_strategy": {
					"enabled": false,
					"rationale": "Fixed numbering provides navigational stability; keep all pages even if N/A",
					"alternative": "Rich N/A pages with context are more valuable than consolidation"
				}
			}
		},
		"page_lifecycle": {
			"generation": "all 58 pages (00-57) generated in first run",
			"updates": "incremental updates via patch_behavior",
			"deprecation": "pages never removed; mark as deprecated if permanently N/A in future versions",
			"evolution": "if new page types needed, propose in 05-final-issues.md for next schema version"
		}
	},

	"capabilities": {
		"default_allowed": ["READ_PROJECT_SOURCE", "WRITE_DOC_OUTPUT", "ZIP_OUTPUT", "GENERATE_TEXT_DIAGRAMS"],
		"explicitly_forbidden": ["GENERATE_MERMAID", "GENERATE_GRAPHVIZ", "GENERATE_PLANTUML", "EMBED_IMAGES"],
		"not_allowed_without_explicit_user_approval": [
			"RUN_BUILD",
			"RUN_TESTS",
			"PROCESS_EXECUTION",
			"NETWORK_EGRESS",
			"GIT_OPERATIONS"
		],
		"health_check_mode": {
			"enabled": true,
			"purpose": "Validate existing documentation integrity without regeneration",
			"capabilities": ["READ_EXISTING_DOCS", "READ_PROJECT_SOURCE", "VALIDATE_ONLY"],
			"outputs": ["health-check-report.md"],
			"checks": [
				"All 58 pages exist",
				"No broken internal links",
				"Coverage map still valid",
				"Terminology consistent",
				"Bottom nav present on all pages",
				"No secret values present",
				"Style consistency with template",
				"Minimum 15 diagrams present in text format",
				"Improvements roadmap up to date",
				"Technical terms formatted with backticks",
				"DevOps pages complete"
			],
			"scoring": {
				"health_score_range": [0.0, 1.0],
				"thresholds": {
					"healthy": 0.95,
					"needs_attention": 0.85,
					"needs_regeneration": 0.75
				}
			}
		}
	},

	"artifacts": {
		"generated_artifacts": [
			"00-template-profile.json",
			"00-preflight-summary.md",
			"00-preflight-questions.md",
			"01-source-inventory.md",
			"01-inventory-index.json",
			"01-planned-files.json",
			"02-terminology-index.json",
			"03-coverage-map.json",
			"04-link-map.json",
			"05-final-validation-report.md",
			"05-final-issues.md",
			"06-change-log.md",
			"07-improvements-map.json",
			"08-technical-terms-index.json",
			"health-check-report.md"
		],
		"artifact_contracts": {
			"00-template-profile.json": {
				"must_include": [
					"reference_file_list",
					"nav_block_pattern",
					"index_link_style",
					"heading_density",
					"diagram_style_preferences",
					"extracted_formatting_rules"
				]
			},
			"01-planned-files.json": {
				"must_include": [
					"ordered_files[]",
					"counts",
					"page_roles",
					"project_type",
					"schema_version",
					"generation_timestamp",
					"content_hash_per_file"
				]
			},
			"02-terminology-index.json": {
				"must_include": ["terms[]", "forbidden_terms[]", "synonyms[]", "context_per_term"],
				"term_structure": {
					"term": "string",
					"definition": "string",
					"first_used_in": "page_reference",
					"synonyms": ["array"],
					"context": "brief explanation of usage",
					"disambiguation": "if multiple meanings exist",
					"should_have_backticks": "boolean"
				},
				"synonym_handling": {
					"validation_mode": "synonyms are allowed; validate primary term is used in key places",
					"conflict_resolution": "if two terms are synonyms, mark one as primary and cross-reference"
				}
			},
			"03-coverage-map.json": {
				"must_include": [
					"discovered_areas[]",
					"mapped_pages[]",
					"unmapped_items[]",
					"coverage_score",
					"coverage_formula_applied",
					"scoring_breakdown"
				],
				"coverage_formula": {
					"description": "Transparent formula for coverage scoring",
					"components": [
						{
							"name": "architectural_coverage",
							"weight": 0.30,
							"calculation": "count(discovered_architectural_areas_with_pages) / count(all_discovered_architectural_areas)"
						},
						{
							"name": "integration_coverage",
							"weight": 0.20,
							"calculation": "count(documented_integrations) / count(discovered_integrations)"
						},
						{
							"name": "ui_coverage",
							"weight": 0.20,
							"calculation": "count(documented_ui_components_and_patterns) / count(discovered_ui_components_and_patterns)"
						},
						{
							"name": "lifecycle_coverage",
							"weight": 0.15,
							"calculation": "count(documented_lifecycle_stages) / count(discovered_lifecycle_stages)"
						},
						{
							"name": "operational_coverage",
							"weight": 0.15,
							"calculation": "count(documented_operational_concerns) / count(key_operational_concerns)"
						}
					],
					"formula": "coverage_score = sum(component_score * weight for all components)",
					"thresholds": {
						"strict": 0.92,
						"lenient": 0.75
					},
					"example": {
						"architectural_coverage": 0.95,
						"integration_coverage": 0.85,
						"ui_coverage": 0.90,
						"lifecycle_coverage": 1.0,
						"operational_coverage": 0.80,
						"calculation": "(0.95*0.30) + (0.85*0.20) + (0.90*0.20) + (1.0*0.15) + (0.80*0.15) = 0.895"
					}
				}
			},
			"04-link-map.json": {
				"must_include": [
					"from_to_edges[]",
					"broken_links[]",
					"orphan_pages[]",
					"external_links_audit[]"
				],
				"external_links_audit_structure": {
					"url": "string",
					"found_in_pages": ["array"],
					"category": "enum[documentation|api_reference|specification|tool|unknown]",
					"status": "enum[ok|404|redirect|insecure|unchecked]",
					"in_allowlist": "boolean",
					"review_required": "boolean"
				}
			},
			"06-change-log.md": {
				"must_include": [
					"timestamp",
					"change_type[initial_generation|incremental_update|patch|health_check]",
					"affected_pages[]",
					"reason_for_change",
					"diff_summary",
					"revalidation_results"
				]
			},
			"07-improvements-map.json": {
				"must_include": [
					"current_score_per_dimension",
					"gap_analysis",
					"prioritized_improvements[]",
					"phased_roadmap",
					"effort_estimates",
					"expected_impact",
					"dependencies_between_improvements"
				],
				"improvement_structure": {
					"id": "string (IMP-001, IMP-002, etc.)",
					"title": "string",
					"description": "string",
					"category": "enum[CRITICAL|HIGH_IMPACT|MEDIUM_IMPACT|LOW_IMPACT|NICE_TO_HAVE]",
					"dimension": "string",
					"current_score": "float",
					"target_score": "float",
					"impact": "float (0-10)",
					"effort": "enum[LOW|MEDIUM|HIGH|VERY_HIGH]",
					"phase": "enum[1|2|3|4]",
					"dependencies": ["array of improvement IDs"],
					"acceptance_criteria": ["array"],
					"resources_needed": ["array"],
					"risks": ["array"]
				}
			},
			"08-technical-terms-index.json": {
				"purpose": "Track all technical terms that should be in backticks",
				"must_include": [
					"classes[]",
					"services[]",
					"folders[]",
					"files[]",
					"technologies[]",
					"patterns[]",
					"consistency_check_results"
				],
				"structure": {
					"term": "string",
					"type": "enum[class|service|folder|file|technology|pattern|method|property|component]",
					"first_used_in": "page_reference",
					"formatted_correctly": "boolean",
					"occurrences": "number"
				}
			},
			"health-check-report.md": {
				"must_include": [
					"health_score",
					"check_results[]",
					"broken_items[]",
					"recommendations[]",
					"regeneration_needed_flag"
				]
			}
		}
	},

	"file_plan": {
		"fixed_pages": {
			"root_entry": "{doc_slug}.md",

			"indices": [
				"{doc_slug}-00-base-index.md",
				"{doc_slug}-12-arch-index.md",
				"{doc_slug}-26-ui-index.md",
				"{doc_slug}-39-appendix-index.md",
				"{doc_slug}-45-devops-index.md"
			],

			"base_layer_01_11": [
				"{doc_slug}-01-base-vision.md",
				"{doc_slug}-02-base-concepts.md",
				"{doc_slug}-03-base-boundaries.md",
				"{doc_slug}-04-base-folder-system.md",
				"{doc_slug}-05-base-dependency-rules.md",
				"{doc_slug}-06-base-runtime-execution.md",
				"{doc_slug}-07-base-lifecycle.md",
				"{doc_slug}-08-base-integrations.md",
				"{doc_slug}-09-base-examples.md",
				"{doc_slug}-10-base-schemas.md",
				"{doc_slug}-11-base-contracts.md"
			],

			"arch_layer_13_25": [
				"{doc_slug}-13-arch.md",
				"{doc_slug}-14-arch-ui-framework.md",
				"{doc_slug}-15-arch-dataflows.md",
				"{doc_slug}-16-arch-json-and-assets.md",
				"{doc_slug}-17-arch-js-interop.md",
				"{doc_slug}-18-arch-rendering-and-state.md",
				"{doc_slug}-19-arch-update-and-sync.md",
				"{doc_slug}-20-arch-composition.md",
				"{doc_slug}-21-arch-validation-rules.md",
				"{doc_slug}-22-arch-performance-and-observability.md",
				"{doc_slug}-23-arch-testing-and-qa.md",
				"{doc_slug}-24-arch-deployment-and-config.md",
				"{doc_slug}-25-arch-resources.md"
			],

			"ui_layer_27_38": [
				"{doc_slug}-27-ui-overview.md",
				"{doc_slug}-28-ui-hierarchy-model.md",
				"{doc_slug}-29-ui-layer-folders.md",
				"{doc_slug}-30-ui-prefix-system.md",
				"{doc_slug}-31-ui-displays.md",
				"{doc_slug}-32-ui-fields.md",
				"{doc_slug}-33-ui-pointers.md",
				"{doc_slug}-34-ui-actions.md",
				"{doc_slug}-35-ui-nodes.md",
				"{doc_slug}-36-ui-components.md",
				"{doc_slug}-37-ui-widgets-and-views.md",
				"{doc_slug}-38-ui-panels-and-navigation.md"
			],

			"standards_and_diagrams_40_44": [
				"{doc_slug}-40-appendix-coding-standards.md",
				"{doc_slug}-41-appendix-code-quality-policy.md",
				"{doc_slug}-42-appendix-pr-review-checklist.md",
				"{doc_slug}-43-diagrams.md",
				"{doc_slug}-44-appendix-improvements-roadmap.md"
			],

			"devops_layer_46_52": [
				"{doc_slug}-46-devops-onboarding.md",
				"{doc_slug}-47-devops-quick-start.md",
				"{doc_slug}-48-devops-debugging.md",
				"{doc_slug}-49-devops-troubleshooting.md",
				"{doc_slug}-50-devops-contribution.md",
				"{doc_slug}-51-devops-secrets.md",
				"{doc_slug}-52-devops-development-workflow.md"
			],

			"final_appendices_53_57": [
				"{doc_slug}-53-appendix-risks-and-vulnerabilities.md",
				"{doc_slug}-54-appendix-source-to-docs-mapping.md",
				"{doc_slug}-55-appendix-duplicate-json-cleanup.md",
				"{doc_slug}-56-appendix-adrs.md",
				"{doc_slug}-57-appendix-glossary.md"
			]
		},

		"project_type_variants": {
			"host": {
				"must_emphasize": [
					"Host ↔ Modules ↔ Plugins architecture",
					"module/plugin discovery + lifecycle",
					"Shared/_Sites UI hierarchy if present",
					"observability/performance targets",
					"deployment/config",
					"testing strategy",
					"integration failure policies at host level"
				]
			},
			"module": {
				"must_emphasize": [
					"public API surface",
					"contracts consumed by plugins/host",
					"stability/versioning expectations",
					"integration touchpoints (if any)"
				]
			},
			"plugin": {
				"must_emphasize": [
					"host wiring and entry points",
					"dependency boundary (avoid Host→Plugin coupling)",
					"UI entry views/panels and actions",
					"configuration hooks",
					"failure policies and safe defaults"
				]
			}
		}
	},

	"page_content_contracts": {
		"common_requirements": {
			"must_include": [
				"Short intro",
				"At least 2 sections",
				"Bottom navigation block",
				"No placeholders (TBD/TODO/???)",
				"Technical terms in backticks"
			],
			"must_reference_artifacts": [
				"02-terminology-index.json (when using defined terms)",
				"01-source-inventory.md (when making architectural claims)"
			],
			"evidence_policy": {
				"rule": "Claims about structure must cite discovered evidence",
				"evidence_types": ["folder path", "file path", "namespace pattern", "project name", "configuration file name", "code snippet reference", "comment reference"],
				"if_unknown": "State unknown explicitly + add investigation steps to 05-final-issues.md",
				"confidence_levels": {
					"certain": "directly observed in source",
					"inferred": "logically derived from observed patterns",
					"uncertain": "ambiguous, needs verification"
				}
			}
		},

		"indices_contracts": {
			"{doc_slug}.md": {
				"required_sections": [
					"What this documentation set contains",
					"How to navigate",
					"Key indices",
					"Status / Coverage summary"
				],
				"must_link_to": [
					"{doc_slug}-00-base-index.md",
					"{doc_slug}-12-arch-index.md",
					"{doc_slug}-26-ui-index.md",
					"{doc_slug}-39-appendix-index.md",
					"{doc_slug}-45-devops-index.md"
				],
				"must_include_mermaid": false,
				"must_include": [
					"Coverage score with brief interpretation",
					"Known gaps or limitations",
					"Recommended reading order for different audiences"
				]
			},

			"{doc_slug}-00-base-index.md": {
				"required_sections": ["Base layer map", "Reading order", "Key concepts"],
				"must_link_to_numbers": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
			},
			"{doc_slug}-12-arch-index.md": {
				"required_sections": ["Architecture layer map", "Diagrams references", "Operational concerns"],
				"must_link_to_numbers": [13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 43]
			},
			"{doc_slug}-26-ui-index.md": {
				"required_sections": ["UI layer map", "Layer folders (00..09 or actual discovered)", "Prefix system (or actual discovered)"],
				"must_link_to_numbers": [27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38],
				"flexibility_note": "Adjust section descriptions based on discovered UI conventions"
			},
			"{doc_slug}-39-appendix-index.md": {
				"required_sections": ["Appendix overview", "Standards and policy", "DevOps guides", "Reference materials"],
				"must_link_to": [
					"Standards: 40, 41, 42",
					"Diagrams and improvements: 43, 44",
					"DevOps: 45-52",
					"Reference: 53, 54, 55, 56, 57"
				]
			},
			"{doc_slug}-45-devops-index.md": {
				"required_sections": ["Developer operations overview", "Getting started", "Daily development", "Contributing"],
				"must_link_to_numbers": [46, 47, 48, 49, 50, 51, 52]
			}
		},

		"base_contracts": {
			"{doc_slug}-01-base-vision.md": {
				"required_sections": ["Purpose", "Audience", "Non-goals", "High-level map"],
				"must_include": ["Scope boundaries for project_type"]
			},
			"{doc_slug}-02-base-concepts.md": {
				"required_sections": ["Core terms", "Key abstractions", "Mental model"],
				"must_generate_or_update": ["02-terminology-index.json"]
			},
			"{doc_slug}-03-base-boundaries.md": {
				"required_sections": ["Boundary rules", "Allowed dependencies", "Forbidden dependencies"],
				"must_include": ["Host/Module/Plugin dependency policy (even if 'not applicable')"],
				"formatting_example": "`Host` → `_Core`, `_Editor`, `_Sites` (allowed)"
			},
			"{doc_slug}-04-base-folder-system.md": {
				"required_sections": ["Top-level layout", "Key folders", "Conventions discovered"],
				"must_include": ["Discovered numbered layers (00..09) or explicit absence", "Actual folder structure, not expected template"]
			},
			"{doc_slug}-05-base-dependency-rules.md": {
				"required_sections": ["Dependency graph summary", "Reference rules", "Planned/future rules"],
				"must_include": ["Host should not depend on plugins (if host exists)"]
			},
			"{doc_slug}-06-base-runtime-execution.md": {
				"required_sections": ["Runtime overview", "Startup/boot", "Key services"],
				"must_include_one_of": ["Program.cs wiring", "DI registration patterns", "Startup equivalents"]
			},
			"{doc_slug}-07-base-lifecycle.md": {
				"required_sections": ["Activation", "Deactivation/unload (if any)", "State ownership"],
				"must_include": ["Where lifecycle decisions live (files/folders) or explicit unknown with investigation plan"]
			},
			"{doc_slug}-08-base-integrations.md": {
				"required_sections": ["Integrations inventory", "Failure policies", "Data ownership"],
				"must_include": ["Timeout/retry/backoff/circuit breaker notes or explicit unknown with investigation plan"]
			},
			"{doc_slug}-09-base-examples.md": {
				"required_sections": ["Common workflows", "Common extension patterns", "Common pitfalls"],
				"must_include": ["At least 2 concrete examples from discovered source"]
			},
			"{doc_slug}-10-base-schemas.md": {
				"required_sections": ["Schema inventory", "Versioning/evolution", "Validation strategy"],
				"must_include": ["Duplicate JSON detection hook (ties to appendix 55)"]
			},
			"{doc_slug}-11-base-contracts.md": {
				"required_sections": ["Public contracts", "Internal contracts", "DI/service contracts"],
				"must_include": ["How consumers should integrate (host/module/plugin)"]
			}
		},

		"arch_contracts": {
			"{doc_slug}-13-arch.md": {
				"required_sections": ["System architecture", "Boundaries", "Key flows"],
				"must_include_diagram": true,
				"required_diagram": "boundary diagram in text format"
			},
			"{doc_slug}-14-arch-ui-framework.md": {
				"required_sections": ["UI framework integration", "Rendering lifecycle", "State model"],
				"not_applicable_allowed": true
			},
			"{doc_slug}-15-arch-dataflows.md": {
				"required_sections": ["Data flow map", "Caching", "State ownership"],
				"must_include": ["At least 1 end-to-end dataflow narrative"]
			},
			"{doc_slug}-16-arch-json-and-assets.md": {
				"required_sections": ["JSON assets inventory", "Duplication risks", "Asset pipelines"],
				"must_include": ["Links to appendix 55 when duplication exists"]
			},
			"{doc_slug}-17-arch-js-interop.md": {
				"required_sections": ["Interop boundary", "Call patterns", "Safety notes"],
				"not_applicable_allowed": true
			},
			"{doc_slug}-18-arch-rendering-and-state.md": {
				"required_sections": ["State containers", "Re-render triggers", "Async patterns"],
				"not_applicable_allowed": true
			},
			"{doc_slug}-19-arch-update-and-sync.md": {
				"required_sections": ["Update mechanisms", "Sync actions", "Consistency rules"],
				"not_applicable_allowed": true
			},
			"{doc_slug}-20-arch-composition.md": {
				"required_sections": ["Composition model", "Module/plugin wiring", "Extension points"],
				"must_include": ["Explicit boundary reminders"]
			},
			"{doc_slug}-21-arch-validation-rules.md": {
				"required_sections": ["Validation invariants", "Failure modes", "User-visible validation"],
				"must_include": ["Where rules are enforced (files/folders) or explicit unknown with investigation plan"]
			},
			"{doc_slug}-22-arch-performance-and-observability.md": {
				"required_sections": ["Targets", "Hotspots", "Observability/logging"],
				"strict_mode_rule": "Must exist even if targets are unknown; include investigation plan.",
				"must_include": [
					"Performance targets (or statement that none are defined)",
					"Known or potential hotspots from code review",
					"Logging/telemetry infrastructure (or absence)",
					"Actionable next steps for establishing observability"
				]
			},
			"{doc_slug}-23-arch-testing-and-qa.md": {
				"required_sections": ["Test strategy", "Coverage notes", "CI/CD hooks (if any)"],
				"strict_mode_rule": "Must exist; if no tests, say so explicitly + remediation plan.",
				"must_include": [
					"Test project inventory (or absence)",
					"Testing philosophy (unit/integration/e2e)",
					"Coverage metrics (if available)",
					"Quality gates in CI/CD (or absence)",
					"Recommended testing approach if none exists"
				]
			},
			"{doc_slug}-24-arch-deployment-and-config.md": {
				"required_sections": ["Deployment targets", "Configuration", "Feature flags"],
				"strict_mode_rule": "Must exist; include local dev steps if found.",
				"must_include": [
					"Deployment model (self-hosted/cloud/hybrid)",
					"Configuration sources (appsettings, env vars, etc.)",
					"Feature flag system (or absence)",
					"Local development setup steps (link to page 46)"
				]
			},
			"{doc_slug}-25-arch-resources.md": {
				"required_sections": ["Internal references", "External references (categorized)"],
				"external_links_rule": "External links allowed with audit trail",
				"categorization": [
					"Official documentation",
					"API references",
					"Specifications/RFCs",
					"Tools and utilities",
					"Community resources"
				]
			}
		},

		"ui_contracts": {
			"{doc_slug}-27-ui-overview.md": {
				"required_sections": ["UI overview", "Navigation model", "User journeys"],
				"not_applicable_allowed": true,
				"if_present": "Document discovered UI architecture"
			},
			"{doc_slug}-28-ui-hierarchy-model.md": {
				"required_sections": ["Hierarchy source folder", "Composition rules", "Examples"],
				"must_include": ["Shared/_Sites findings or discovered equivalent", "Actual folder structure, not assumed template"]
			},
			"{doc_slug}-29-ui-layer-folders.md": {
				"required_sections": ["Discovered layer roles", "Folder-to-role mapping", "Practical usage"],
				"must_include": [
					"Discovered layer folder set (may differ from 00..09 template)",
					"If naming/numbering differs, document actual system",
					"Explicit comparison to expected template if deviations exist"
				]
			},
			"{doc_slug}-30-ui-prefix-system.md": {
				"required_sections": ["Prefix list", "Roles", "Examples from source"],
				"must_include": [
					"Discovered prefixes (may differ from D_, F_, P_, etc. template)",
					"If prefix system differs, document actual system",
					"Pattern extraction from actual component names"
				]
			},
			"{doc_slug}-31-ui-displays.md": {
				"required_sections": ["Display responsibilities", "Rendering patterns", "Examples"],
				"not_applicable_allowed": true
			},
			"{doc_slug}-32-ui-fields.md": {
				"required_sections": ["Field responsibilities", "Validation", "Examples"],
				"not_applicable_allowed": true
			},
			"{doc_slug}-33-ui-pointers.md": {
				"required_sections": ["Pointer responsibilities", "Navigation helpers", "Examples"],
				"not_applicable_allowed": true
			},
			"{doc_slug}-34-ui-actions.md": {
				"required_sections": ["Actions responsibilities", "State changes", "Async patterns"],
				"not_applicable_allowed": true
			},
			"{doc_slug}-35-ui-nodes.md": {
				"required_sections": ["Node system status", "Current capabilities", "Planned capabilities"],
				"not_applicable_allowed": true
			},
			"{doc_slug}-36-ui-components.md": {
				"required_sections": ["Component composition", "Reusability rules", "Examples"],
				"not_applicable_allowed": true
			},
			"{doc_slug}-37-ui-widgets-and-views.md": {
				"required_sections": ["Widgets vs Views", "Composition patterns", "Examples"],
				"not_applicable_allowed": true
			},
			"{doc_slug}-38-ui-panels-and-navigation.md": {
				"required_sections": ["Panels", "Navigation shells", "Common layout patterns"],
				"not_applicable_allowed": true
			}
		},

		"standards_and_policy_contracts": {
			"{doc_slug}-40-appendix-coding-standards.md": {
				"purpose": "Coding standards and conventions",
				"required_sections": [
					"Naming Conventions",
					"File Organization",
					"Code Structure",
					"Documentation Requirements",
					"EditorConfig Settings"
				],
				"must_include": [
					"Prefix system rules (F_, P_, A_, C_, PNL_)",
					"Layer dependency rules with backtick formatting",
					"When to add XML comments",
					"Actual EditorConfig file contents"
				]
			},

			"{doc_slug}-41-appendix-code-quality-policy.md": {
				"purpose": "Code quality philosophy and approach",
				"required_sections": [
					"Philosophy (Human Review over Metrics)",
					"What We Value",
					"What We Avoid",
					"Tool Recommendations",
					"ADR Reference"
				],
				"must_include": [
					"Why no cyclomatic complexity thresholds",
					"Roslyn analyzers vs SonarQube decision",
					"Consequences of approach",
					"Link to ADR-005 on page 56"
				]
			},

			"{doc_slug}-42-appendix-pr-review-checklist.md": {
				"purpose": "Checklist for code reviewers",
				"format": "Checkbox list for each category",
				"categories": [
					"Readability",
					"Boundaries",
					"Error Handling",
					"Testing",
					"Refactoring Signals"
				],
				"must_include": [
					"Concrete examples of good/bad",
					"When to request changes vs suggest improvements",
					"Checklist format suitable for copying into PR template"
				]
			},

			"{doc_slug}-43-diagrams.md": {
				"purpose": "Comprehensive visual documentation",
				"required_sections": [
					"Diagram Index",
					"System Architecture Diagrams",
					"Class Hierarchy Diagrams",
					"Dependency Graphs",
					"Data Flow Diagrams",
					"Component Relationship Diagrams",
					"Sequence Diagrams",
					"Layer Structure Diagrams",
					"Folder Structure Diagrams",
					"Deployment Topology"
				],
				"minimum_diagrams": 15,
				"mandatory_diagram_types": [
					{"type": "System Boundaries", "count": 1},
					{"type": "Class Hierarchies", "count": 3},
					{"type": "Dependency Graphs", "count": 2},
					{"type": "Data Flows", "count": 2},
					{"type": "Component Relationships", "count": 2},
					{"type": "Sequence Diagrams", "count": 2},
					{"type": "Layer Structure", "count": 1},
					{"type": "Folder Structure", "count": 1},
					{"type": "Deployment Topology", "count": 1}
				],
				"diagram_format_requirements": {
					"format": "text_only_ascii",
					"code_block": "```text\n...\n```",
					"forbidden": ["mermaid", "graphviz", "plantuml", "svg", "image files"],
					"max_width": 80
				},
				"each_diagram_must_include": [
					"Title (H3 heading)",
					"Textual description before diagram",
					"The diagram in ```text code block",
					"Legend if symbols need explanation",
					"Key relationships or flows explained below"
				]
			},

			"{doc_slug}-44-appendix-improvements-roadmap.md": {
				"purpose": "Comprehensive roadmap to 10/10 project quality",
				"required_sections": [
					"Current State Assessment",
					"Quality Scoring Matrix",
					"Critical Improvements (Phase 1)",
					"High-Impact Improvements (Phase 2)",
					"Medium-Impact Improvements (Phase 3)",
					"Nice-to-Have Improvements (Phase 4)",
					"Quick Wins",
					"Dependencies and Sequencing",
					"Effort Estimates",
					"Success Metrics"
				],
				"must_include": [
					"Current score per dimension (0-10 scale)",
					"Gap analysis",
					"At least 20 actionable improvements",
					"Effort estimates",
					"Impact scores",
					"Phase assignments",
					"Acceptance criteria per improvement",
					"Dependencies mapped"
				]
			}
		},

		"devops_contracts": {
			"{doc_slug}-46-devops-onboarding.md": {
				"purpose": "Step-by-step guide for new developers",
				"required_sections": [
					"Prerequisites",
					"Environment Setup",
					"Clone and Build",
					"Configuration (User Secrets)",
					"First Run",
					"Common First-Day Issues",
					"Next Steps"
				],
				"must_include": [
					"Time estimate (e.g., '< 30 minutes')",
					"Exact commands to run",
					"How to configure secrets in Rider (link to page 51)",
					"How to verify setup works",
					"Where to get help",
					"All technical terms in backticks"
				]
			},

			"{doc_slug}-47-devops-quick-start.md": {
				"purpose": "Quick reference for common tasks",
				"required_sections": [
					"Run Locally",
					"Run Tests",
					"Build for Production",
					"Common Commands",
					"Hot Reload / Watch Mode",
					"Troubleshooting Quick Fixes"
				],
				"must_include": [
					"One-liner commands for each task",
					"Keyboard shortcuts (Rider/VS)",
					"Performance tips"
				]
			},

			"{doc_slug}-48-devops-debugging.md": {
				"purpose": "Debugging techniques and tools",
				"required_sections": [
					"Debugging in Rider",
					"Debugging in VS Code",
					"Browser DevTools for Blazor",
					"SignalR Debugging",
					"Logging and Diagnostics",
					"Common Debugging Scenarios"
				],
				"must_include": [
					"Breakpoint strategies",
					"Watch expressions",
					"Conditional breakpoints",
					"Hot reload debugging"
				]
			},

			"{doc_slug}-49-devops-troubleshooting.md": {
				"purpose": "Solutions to common problems",
				"required_sections": [
					"Build Failures",
					"Runtime Errors",
					"SignalR Connection Issues",
					"JSON File Errors",
					"Integration API Errors",
					"Performance Problems",
					"When to Ask for Help"
				],
				"format": "Problem → Cause → Solution pattern",
				"must_include": [
					"Concrete error messages",
					"Step-by-step solutions",
					"Prevention strategies"
				]
			},

			"{doc_slug}-50-devops-contribution.md": {
				"purpose": "Contribution guidelines (CONTRIBUTING.md equivalent)",
				"required_sections": [
					"How to Contribute",
					"Code Style",
					"Commit Messages",
					"Branch Naming",
					"Pull Request Process",
					"Code Review Expectations",
					"Testing Requirements"
				],
				"must_include": [
					"Link to PR review checklist (page 42)",
					"Link to coding standards (page 40)",
					"Branch naming convention examples",
					"Commit message format"
				]
			},

			"{doc_slug}-51-devops-secrets.md": {
				"purpose": "Secrets management guide",
				"required_sections": [
					"What Are Secrets?",
					"Local Development (Rider User Secrets)",
					"Local Development (.NET User Secrets CLI)",
					"Production (Cloud Secrets Management)",
					"Never Commit These",
					"Secret Scanning",
					"Rotating Secrets"
				],
				"must_include": [
					"Step-by-step Rider setup (Right-click → Tools → Manage User Secrets)",
					"Storage path: %APPDATA%\\Microsoft\\UserSecrets\\{id}\\secrets.json",
					"dotnet user-secrets commands",
					"How to verify secrets are loaded",
					"What to do if secrets are leaked",
					"Example secrets.json structure"
				]
			},

			"{doc_slug}-52-devops-development-workflow.md": {
				"purpose": "Day-to-day development workflow",
				"required_sections": [
					"Feature Development Flow",
					"Testing Before Commit",
					"Local Pre-Commit Checks",
					"CI/CD Pipeline",
					"Deployment Process",
					"Hotfix Process"
				],
				"must_include": [
					"Workflow diagram or numbered steps",
					"Integration with pages 46-51"
				]
			}
		},

		"final_appendices_contracts": {
			"{doc_slug}-53-appendix-risks-and-vulnerabilities.md": {
				"required_sections": [
					"Potential secrets",
					"Boundary violations",
					"Perf/memory risks",
					"Integration failure risks",
					"Remediation plan"
				],
				"must_include": ["No secrets printed rule reminder", "Severity categorization", "Prioritized action items"]
			},

			"{doc_slug}-54-appendix-source-to-docs-mapping.md": {
				"required_sections": ["Folder-to-page map", "Key file map", "Where to start (new contributor)"],
				"must_include": ["At least 10 mapping entries if project non-trivial", "Reverse index (page → source areas)"]
			},

			"{doc_slug}-55-appendix-duplicate-json-cleanup.md": {
				"required_sections": [
					"Duplication pattern",
					"Impact/risk",
					"Canonical naming plan",
					"Deprecation timeline",
					"CI guardrail idea"
				],
				"not_applicable_allowed": true,
				"if_applicable": "Include concrete file pairs, impact analysis, phased cleanup plan"
			},

			"{doc_slug}-56-appendix-adrs.md": {
				"purpose": "Architecture Decision Records",
				"required_sections": [
					"What Are ADRs?",
					"ADR Template",
					"ADR Index",
					"Example ADRs"
				],
				"minimum_adrs": 5,
				"required_adrs": [
					"ADR-001: Technology choice (e.g., Blazor Server)",
					"ADR-002: Architecture pattern (e.g., 00-09 layers)",
					"ADR-003: State management approach",
					"ADR-004: Data source integration",
					"ADR-005: Code quality approach (human review over metrics)"
				],
				"adr_template": {
					"title": "ADR-{number}: {Title}",
					"status": "Proposed | Accepted | Deprecated | Superseded",
					"date": "YYYY-MM-DD",
					"context": "What problem are we solving?",
					"decision": "What did we decide?",
					"alternatives": "What else did we consider?",
					"consequences": "What are the implications?"
				}
			},

			"{doc_slug}-57-appendix-glossary.md": {
				"purpose": "Comprehensive glossary",
				"format": "Alphabetical list with definitions",
				"must_include": [
					"All terms from 02-terminology-index.json",
					"All technical terms from 08-technical-terms-index.json",
					"Cross-references between related terms",
					"Page references for where terms are explained in detail"
				],
				"generation": "Auto-generated from indices + manual curation"
			}
		}
	},

	"validators": {
		"link_validation": {
			"enabled": true,
			"must_pass_in_strict_mode": true,
			"rules": [
				"No broken internal links",
				"Every generated page linked from at least one index",
				"No orphan pages",
				"Bottom navigation exists on every page",
				"External links audited and categorized"
			],
			"output": "04-link-map.json"
		},
		"numbering_validation": {
			"enabled": true,
			"must_pass_in_strict_mode": true,
			"rules": [
				"00..57 fixed ascending",
				"no duplicates",
				"all files exist"
			]
		},
		"terminology_validation": {
			"enabled": true,
			"must_pass_in_strict_mode": true,
			"rules": [
				"Terms used are defined in 02-terminology-index.json",
				"Forbidden terms not used",
				"Synonyms handled consistently",
				"Primary terms used in key locations"
			]
		},
		"coverage_validation": {
			"enabled": true,
			"scoring": {
				"coverage_score_range": [0.0, 1.0],
				"strict_threshold": 0.92,
				"lenient_threshold": 0.75,
				"formula_transparency": "See 03-coverage-map.json"
			},
			"rules": [
				"Key discovered areas mapped to pages",
				"Unmapped items listed with remediation",
				"Coverage score calculated transparently",
				"Component scores tracked"
			],
			"output": "03-coverage-map.json"
		},
		"security_validation": {
			"enabled": true,
			"must_pass_in_strict_mode": false,
			"rules": [
				"No secret values reproduced",
				"Suspected secrets reported in appendix 53",
				"Severity levels assigned",
				"False positives noted"
			]
		},
		"style_validation": {
			"enabled": true,
			"must_pass_in_strict_mode": true,
			"rules": [
				"Page layout contract respected",
				"Headings depth <= H3",
				"Relative links for internal",
				"Dividers used consistently",
				"Accessibility guidelines followed"
			]
		},
		"diagram_validation": {
			"enabled": true,
			"must_pass_in_strict_mode": true,
			"rules": [
				"Minimum 15 diagrams present",
				"All diagrams in ```text format only",
				"No mermaid/graphviz/plantuml",
				"Each diagram has title and description",
				"All mandatory types present",
				"Width <= 80 characters",
				"Index present"
			]
		},
		"improvements_validation": {
			"enabled": true,
			"must_pass_in_strict_mode": true,
			"rules": [
				"Improvements roadmap exists",
				"Current scores for all dimensions",
				"At least 20 improvements",
				"Effort estimates present",
				"Impact scores present",
				"Phases assigned",
				"Dependencies mapped",
				"Acceptance criteria defined"
			]
		},
		"technical_term_formatting_validation": {
			"enabled": true,
			"must_pass_in_strict_mode": true,
			"rules": [
				"All class names in backticks",
				"All folder/file names in backticks",
				"All technology names in backticks",
				"All method/property names in backticks",
				"Consistency across pages"
			],
			"exceptions": [
				"Terms in code blocks",
				"Common words not part of names"
			],
			"output": "technical-term-validation in 05-final-validation-report.md"
		},
		"devops_pages_validation": {
			"enabled": true,
			"must_pass_in_strict_mode": true,
			"rules": [
				"All 7 DevOps pages exist (46-52)",
				"Onboarding has time estimate",
				"Quick-start has runnable commands",
				"Secrets page has Rider instructions",
				"All follow template format"
			]
		},
		"adr_validation": {
			"enabled": true,
			"must_pass_in_strict_mode": false,
			"rules": [
				"ADR page exists",
				"At least 5 ADRs present",
				"ADRs follow template",
				"Code quality ADR exists"
			]
		}
	},

	"orchestration_flow": {
		"parallelization_opportunities": {
			"phase_2_and_3": {
				"parallel": ["terminology_extraction", "integration_discovery", "ui_convention_scan"],
				"sequential_dependency": "all complete before fileplan lock"
			},
			"phase_5_6_7": {
				"parallel": ["base_layer_generation", "arch_layer_generation", "ui_layer_generation"],
				"constraint": "terminology index must be available",
				"benefit": "30-40% time reduction"
			},
			"phase_10_11_12": {
				"parallel": ["devops_layer", "standards_layer", "adrs_glossary"],
				"constraint": "all depend on completed inventory",
				"benefit": "faster generation of supplementary pages"
			},
			"phase_validation": {
				"parallel": ["link_validation", "coverage_validation", "security_validation", "style_validation", "diagram_validation", "improvements_validation", "technical_term_validation"],
				"sequential_dependency": "all complete before final report"
			}
		},
		"sequence": [
			{ "phase": 0, "agent_id": "template_extractor", "gate": { "mode": "auto" } },
			{ "phase": 1, "agent_id": "preflight_and_questions", "gate": { "mode": "interactive_if_blocking" } },
			{ "phase": 2, "agent_id": "source_discovery_inventory", "gate": { "mode": "interactive_in_strict" } },
			{ "phase": 3, "agent_id": "fileplan_and_contract_locker", "gate": { "mode": "interactive" } },
			{ "phase": 4, "agent_id": "generate_indices_and_root", "gate": { "mode": "interactive" } },
			{ "phase": 5, "agent_id": "generate_base_layer", "gate": { "mode": "interactive" } },
			{ "phase": 6, "agent_id": "generate_arch_layer", "gate": { "mode": "interactive" } },
			{ "phase": 7, "agent_id": "generate_ui_layer", "gate": { "mode": "interactive_in_strict" } },
			{ "phase": 8, "agent_id": "generate_improvements_roadmap", "gate": { "mode": "interactive" } },
			{ "phase": 9, "agent_id": "generate_comprehensive_diagrams", "gate": { "mode": "interactive" } },
			{ "phase": 10, "agent_id": "generate_standards_and_policy", "gate": { "mode": "interactive" } },
			{ "phase": 11, "agent_id": "generate_devops_layer", "gate": { "mode": "interactive" } },
			{ "phase": 12, "agent_id": "generate_adrs_and_glossary", "gate": { "mode": "interactive" } },
			{ "phase": 13, "agent_id": "final_validation_and_bundle", "gate": { "mode": "interactive" } }
		]
	},

	"agents": [
		{
			"agent_id": "template_extractor",
			"phase": 0,
			"role": "Template Extractor",
			"responsibility": "Analyze example_docs_source and extract style constraints"
		},
		{
			"agent_id": "preflight_and_questions",
			"phase": 1,
			"role": "Preflight Validator + Question Builder"
		},
		{
			"agent_id": "source_discovery_inventory",
			"phase": 2,
			"role": "Source Discovery + Inventory"
		},
		{
			"agent_id": "fileplan_and_contract_locker",
			"phase": 3,
			"role": "Fileplan + Contracts Locker"
		},
		{
			"agent_id": "generate_indices_and_root",
			"phase": 4,
			"role": "Root + Index Generator"
		},
		{
			"agent_id": "generate_base_layer",
			"phase": 5,
			"role": "Base Layer Generator (01-11)"
		},
		{
			"agent_id": "generate_arch_layer",
			"phase": 6,
			"role": "Architecture Layer Generator (13-25)"
		},
		{
			"agent_id": "generate_ui_layer",
			"phase": 7,
			"role": "UI Layer Generator (27-38)"
		},
		{
			"agent_id": "generate_improvements_roadmap",
			"phase": 8,
			"role": "Improvements Roadmap Generator (44)"
		},
		{
			"agent_id": "generate_comprehensive_diagrams",
			"phase": 9,
			"role": "Comprehensive Diagram Generator (43)"
		},
		{
			"agent_id": "generate_standards_and_policy",
			"phase": 10,
			"role": "Standards and Policy Generator (40-42)",
			"outputs": [
				"{doc_slug}-40-appendix-coding-standards.md",
				"{doc_slug}-41-appendix-code-quality-policy.md",
				"{doc_slug}-42-appendix-pr-review-checklist.md"
			]
		},
		{
			"agent_id": "generate_devops_layer",
			"phase": 11,
			"role": "DevOps Documentation Generator (45-52)",
			"outputs": [
				"{doc_slug}-45-devops-index.md",
				"{doc_slug}-46-devops-onboarding.md",
				"{doc_slug}-47-devops-quick-start.md",
				"{doc_slug}-48-devops-debugging.md",
				"{doc_slug}-49-devops-troubleshooting.md",
				"{doc_slug}-50-devops-contribution.md",
				"{doc_slug}-51-devops-secrets.md",
				"{doc_slug}-52-devops-development-workflow.md"
			]
		},
		{
			"agent_id": "generate_adrs_and_glossary",
			"phase": 12,
			"role": "ADR and Glossary Generator (56-57)",
			"outputs": [
				"{doc_slug}-53-appendix-risks-and-vulnerabilities.md",
				"{doc_slug}-54-appendix-source-to-docs-mapping.md",
				"{doc_slug}-55-appendix-duplicate-json-cleanup.md",
				"{doc_slug}-56-appendix-adrs.md",
				"{doc_slug}-57-appendix-glossary.md",
				"08-technical-terms-index.json"
			]
		},
		{
			"agent_id": "final_validation_and_bundle",
			"phase": 13,
			"role": "Final Validator + Bundle Creator"
		}
	],

	"health_check_workflow": {
		"trigger": "user provides existing_docs_path",
		"purpose": "Validate existing documentation without regeneration",
		"steps": [
			"Load 01-planned-files.json and verify all files exist",
			"Run all validators",
			"Check technical term formatting",
			"Verify DevOps pages complete",
			"Compare inventory with current source",
			"Calculate health score",
			"Generate health-check-report.md"
		],
		"outputs": ["health-check-report.md"]
	},

	"usage_prompt_companion": {
		"title": "Documentation Workflow v2.4 Usage",
		"description": "Generate comprehensive documentation with developer operations, standards, and ADRs",
		"fields": [
			"project_name",
			"project_type",
			"project_source",
			"save_output_to",
			"example_docs_source",
			"validation_strictness",
			"review_mode",
			"answers_bundle (optional)"
		],
		"commands": {
			"generate": "Generate full 58-page documentation",
			"health_check": "Validate existing documentation",
			"incremental_update": "Update based on source changes"
		},
		"outputs": {
			"total_pages": 58,
			"minimum_diagrams": 15,
			"minimum_improvements": 20,
			"minimum_adrs": 5
		}
	}
}
